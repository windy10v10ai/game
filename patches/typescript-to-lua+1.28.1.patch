diff --git a/node_modules/typescript-to-lua/dist/LuaPrinter.js b/node_modules/typescript-to-lua/dist/LuaPrinter.js
index 5f2c458..48e8932 100644
--- a/node_modules/typescript-to-lua/dist/LuaPrinter.js
+++ b/node_modules/typescript-to-lua/dist/LuaPrinter.js
@@ -125,7 +125,11 @@ class LuaPrinter {
         });
         const mapItems = Object.entries(map).map(([line, original]) => `["${line}"] = ${original}`);
         const mapString = "{" + mapItems.join(",") + "}";
-        return `__TS__SourceMapTraceBack(debug.getinfo(1).short_src, ${mapString});`;
+        const outDir = (0, transpilation_1.getEmitOutDir)(this.program);
+        const relativePath = outDir ? path.relative(outDir, this.luaFile) : this.luaFile;
+        const fileKey = (0, utils_1.normalizeSlashes)(relativePath || this.luaFile.replace(/\\/g, "/"));
+        const setCurrentFile = fileKey.includes("dota_ts_adapter") ? "" : `_G.__TS__currentFile = ${escapeString(fileKey)}\n`;
+        return setCurrentFile + `__TS__SourceMapTraceBack(${escapeString(fileKey)}, ${mapString});`;
     }
     printFile(file) {
         var _a, _b;
diff --git a/node_modules/typescript-to-lua/dist/lualib/universal/lualib_bundle.lua b/node_modules/typescript-to-lua/dist/lualib/universal/lualib_bundle.lua
index 9670e60..38a9792 100644
--- a/node_modules/typescript-to-lua/dist/lualib/universal/lualib_bundle.lua
+++ b/node_modules/typescript-to-lua/dist/lualib/universal/lualib_bundle.lua
@@ -11,7 +11,7 @@ local function __TS__ArrayIsArray(value)
 end
 
 local function __TS__ArrayConcat(self, ...)
-    local items = {...}
+    local items = { ... }
     local result = {}
     local len = 0
     for i = 1, #self do
@@ -35,12 +35,15 @@ end
 
 local __TS__Symbol, Symbol
 do
-    local symbolMetatable = {__tostring = function(self)
-        return ("Symbol(" .. (self.description or "")) .. ")"
-    end}
+    local symbolMetatable = {
+        __tostring = function(self)
+            return ("Symbol(" .. (self.description or "")) .. ")"
+        end
+    }
     function __TS__Symbol(description)
-        return setmetatable({description = description}, symbolMetatable)
+        return setmetatable({ description = description }, symbolMetatable)
     end
+
     Symbol = {
         asyncDispose = __TS__Symbol("Symbol.asyncDispose"),
         dispose = __TS__Symbol("Symbol.dispose"),
@@ -58,7 +61,7 @@ local function __TS__ArrayEntries(array)
             return self
         end,
         next = function(self)
-            local result = {done = array[key + 1] == nil, value = {key, array[key + 1]}}
+            local result = { done = array[key + 1] == nil, value = { key, array[key + 1] } }
             key = key + 1
             return result
         end
@@ -272,7 +275,7 @@ local function __TS__ArrayMap(self, callbackfn, thisArg)
 end
 
 local function __TS__ArrayPush(self, ...)
-    local items = {...}
+    local items = { ... }
     local len = #self
     for i = 1, #items do
         len = len + 1
@@ -356,7 +359,7 @@ local function __TS__ArrayReverse(self)
 end
 
 local function __TS__ArrayUnshift(self, ...)
-    local items = {...}
+    local items = { ... }
     local numItemsToInsert = #items
     if numItemsToInsert == 0 then
         return #self
@@ -428,7 +431,7 @@ local function __TS__ArraySome(self, callbackfn, thisArg)
 end
 
 local function __TS__ArraySplice(self, ...)
-    local args = {...}
+    local args = { ... }
     local len = #self
     local actualArgumentCount = __TS__CountVarargs(...)
     local start = args[1]
@@ -571,25 +574,25 @@ end
 local __TS__Unpack = table.unpack or unpack
 
 local function __TS__ArrayToReversed(self)
-    local copy = {__TS__Unpack(self)}
+    local copy = { __TS__Unpack(self) }
     __TS__ArrayReverse(copy)
     return copy
 end
 
 local function __TS__ArrayToSorted(self, compareFn)
-    local copy = {__TS__Unpack(self)}
+    local copy = { __TS__Unpack(self) }
     __TS__ArraySort(copy, compareFn)
     return copy
 end
 
 local function __TS__ArrayToSpliced(self, start, deleteCount, ...)
-    local copy = {__TS__Unpack(self)}
+    local copy = { __TS__Unpack(self) }
     __TS__ArraySplice(copy, start, deleteCount, ...)
     return copy
 end
 
 local function __TS__ArrayWith(self, index, value)
-    local copy = {__TS__Unpack(self)}
+    local copy = { __TS__Unpack(self) }
     copy[index + 1] = value
     return copy
 end
@@ -620,7 +623,7 @@ local function __TS__InstanceOf(obj, classTbl)
 end
 
 local function __TS__Class(self)
-    local c = {prototype = {}}
+    local c = { prototype = {} }
     c.prototype.__index = c.prototype
     c.prototype.constructor = c
     return c
@@ -664,6 +667,7 @@ do
             self:reject(____error)
         end
     end
+
     function __TS__Promise.resolve(value)
         if __TS__InstanceOf(value, __TS__Promise) then
             return value
@@ -673,12 +677,14 @@ do
         promise.value = value
         return promise
     end
+
     function __TS__Promise.reject(reason)
         local promise = __TS__New(__TS__Promise, doNothing)
         promise.state = 2
         promise.rejectionReason = reason
         return promise
     end
+
     __TS__Promise.prototype["then"] = function(self, onFulfilled, onRejected)
         local promise, resolve, reject = makeDeferredPromise()
         self:addCallbacks(
@@ -699,9 +705,11 @@ do
         local ____self_rejectedCallbacks_1 = self.rejectedCallbacks
         ____self_rejectedCallbacks_1[#____self_rejectedCallbacks_1 + 1] = rejectedCallback
     end
+
     function __TS__Promise.prototype.catch(self, onRejected)
         return self["then"](self, nil, onRejected)
     end
+
     function __TS__Promise.prototype.finally(self, onFinally)
         if onFinally then
             local ____self_finallyCallbacks_2 = self.finallyCallbacks
@@ -712,6 +720,7 @@ do
         end
         return self
     end
+
     function __TS__Promise.prototype.resolve(self, value)
         if isPromiseLike(value) then
             return value:addCallbacks(
@@ -725,6 +734,7 @@ do
             return self:invokeCallbacks(self.fulfilledCallbacks, value)
         end
     end
+
     function __TS__Promise.prototype.reject(self, reason)
         if self.state == 0 then
             self.state = 2
@@ -732,6 +742,7 @@ do
             return self:invokeCallbacks(self.rejectedCallbacks, reason)
         end
     end
+
     function __TS__Promise.prototype.invokeCallbacks(self, callbacks, value)
         local callbacksLength = #callbacks
         local finallyCallbacks = self.finallyCallbacks
@@ -752,6 +763,7 @@ do
             return finallyCallbacks[finallyCallbacksLength](finallyCallbacks)
         end
     end
+
     function __TS__Promise.prototype.createPromiseResolvingCallback(self, f, resolve, reject)
         return function(____, value)
             local success, resultOrError = ____pcall(f, nil, value)
@@ -761,6 +773,7 @@ do
             return self:handleCallbackValue(resultOrError, resolve, reject)
         end
     end
+
     function __TS__Promise.prototype.handleCallbackValue(self, value, resolve, reject)
         if isPromiseLike(value) then
             local nextpromise = value
@@ -796,6 +809,7 @@ do
                     end
                     return reject(nil, resultOrError)
                 end
+
                 function step(result)
                     if resolved then
                         return
@@ -805,6 +819,7 @@ do
                     end
                     return __TS__Promise.resolve(result):addCallbacks(fulfilled, reject)
                 end
+
                 resolved = false
                 asyncCoroutine = cocreate(generator)
                 local success, resultOrError = coresume(
@@ -822,6 +837,7 @@ do
             end
         )
     end
+
     function __TS__Await(thing)
         return coyield(thing)
     end
@@ -829,7 +845,7 @@ end
 
 local function __TS__ClassExtends(target, base)
     target.____super = base
-    local staticMetatable = setmetatable({__index = base}, base)
+    local staticMetatable = setmetatable({ __index = base }, base)
     setmetatable(target, staticMetatable)
     local baseMetatable = getmetatable(base)
     if baseMetatable then
@@ -865,7 +881,7 @@ local function __TS__CloneDescriptor(____bindingPattern0)
     set = ____bindingPattern0.set
     writable = ____bindingPattern0.writable
     value = ____bindingPattern0.value
-    local descriptor = {enumerable = enumerable == true, configurable = configurable == true}
+    local descriptor = { enumerable = enumerable == true, configurable = configurable == true }
     local hasGetterOrSetter = get ~= nil or set ~= nil
     local hasValueOrWritableAttribute = writable ~= nil or value ~= nil
     if hasGetterOrSetter and hasValueOrWritableAttribute then
@@ -901,7 +917,7 @@ local function __TS__Decorate(self, originalValue, decorators, context)
 end
 
 local function __TS__ObjectAssign(target, ...)
-    local sources = {...}
+    local sources = { ... }
     for i = 1, #sources do
         local source = sources[i]
         for key in pairs(source) do
@@ -963,7 +979,8 @@ do
                     else
                         if descriptor.writable == false then
                             error(
-                                ((("Cannot assign to read only property '" .. key) .. "' of object '") .. tostring(self)) .. "'",
+                                ((("Cannot assign to read only property '" .. key) .. "' of object '") .. tostring(self)) ..
+                                "'",
                                 0
                             )
                         end
@@ -1036,9 +1053,11 @@ local function __TS__DecorateLegacy(decorators, target, key, desc)
                     result = decorator(nil, result)
                 elseif desc == true then
                     local value = rawget(target, key)
-                    local descriptor = __TS__ObjectGetOwnPropertyDescriptor(target, key) or ({configurable = true, writable = true, value = value})
+                    local descriptor = __TS__ObjectGetOwnPropertyDescriptor(target, key) or
+                    ({ configurable = true, writable = true, value = value })
                     local desc = decorator(nil, target, key, descriptor) or descriptor
-                    local isSimpleValue = desc.configurable == true and desc.writable == true and not desc.get and not desc.set
+                    local isSimpleValue = desc.configurable == true and desc.writable == true and not desc.get and
+                    not desc.set
                     if isSimpleValue then
                         rawset(target, key, desc.value)
                     else
@@ -1101,7 +1120,7 @@ do
     local function wrapErrorToString(self, getDescription)
         return function(self)
             local description = getDescription(self)
-            local caller = debug.getinfo(3, "f")
+            local caller = (debug ~= nil and debug.getinfo ~= nil) and debug.getinfo(3, "f") or nil
             local isClassicLua = __TS__StringIncludes(_VERSION, "Lua 5.0") or _VERSION == "Lua 5.1"
             if isClassicLua or caller and caller.func ~= error then
                 return description
@@ -1114,7 +1133,7 @@ do
         Type.name = name
         return setmetatable(
             Type,
-            {__call = function(____, _self, message) return __TS__New(Type, message) end}
+            { __call = function(____, _self, message) return __TS__New(Type, message) end }
         )
     end
     local ____initErrorClass_1 = initErrorClass
@@ -1133,9 +1152,11 @@ do
             metatable.__tostring = wrapErrorToString(nil, metatable.__tostring)
         end
     end
+
     function ____class_0.prototype.__tostring(self)
         return self.message ~= "" and (self.name .. ": ") .. self.message or self.name
     end
+
     Error = ____initErrorClass_1(nil, ____class_0, "Error")
     local function createErrorClass(self, name)
         local ____initErrorClass_3 = initErrorClass
@@ -1146,6 +1167,7 @@ do
             ____class_2.____super.prototype.____constructor(self, ...)
             self.name = name
         end
+
         return ____initErrorClass_3(nil, ____class_2, name)
     end
     RangeError = createErrorClass(nil, "RangeError")
@@ -1225,9 +1247,9 @@ local function __TS__DelegatedYield(iterable)
 end
 
 local function __TS__FunctionBind(fn, ...)
-    local boundArgs = {...}
+    local boundArgs = { ... }
     return function(____, ...)
-        local args = {...}
+        local args = { ... }
         __TS__ArrayUnshift(
             args,
             __TS__Unpack(boundArgs)
@@ -1244,7 +1266,7 @@ do
     local function generatorNext(self, ...)
         local co = self.____coroutine
         if coroutine.status(co) == "dead" then
-            return {done = true}
+            return { done = true }
         end
         local status, value = coroutine.resume(co, ...)
         if not status then
@@ -1257,7 +1279,7 @@ do
     end
     function __TS__Generator(fn)
         return function(...)
-            local args = {...}
+            local args = { ... }
             local argsLength = __TS__CountVarargs(...)
             return {
                 ____coroutine = coroutine.create(function() return fn(__TS__Unpack(args, 1, argsLength)) end),
@@ -1277,7 +1299,7 @@ local function __TS__LuaIteratorSpread(self, state, firstKey)
     local results = {}
     local key, value = self(state, firstKey)
     while key do
-        results[#results + 1] = {key, value}
+        results[#results + 1] = { key, value }
         key, value = self(state, key)
     end
     return __TS__Unpack(results)
@@ -1314,6 +1336,7 @@ do
             end
         end
     end
+
     function Map.prototype.clear(self)
         self.items = {}
         self.nextKey = {}
@@ -1322,6 +1345,7 @@ do
         self.lastKey = nil
         self.size = 0
     end
+
     function Map.prototype.delete(self, key)
         local contains = self:has(key)
         if contains then
@@ -1347,17 +1371,21 @@ do
         self.items[key] = nil
         return contains
     end
+
     function Map.prototype.forEach(self, callback)
         for ____, key in __TS__Iterator(self:keys()) do
             callback(nil, self.items[key], key, self)
         end
     end
+
     function Map.prototype.get(self, key)
         return self.items[key]
     end
+
     function Map.prototype.has(self, key)
         return self.nextKey[key] ~= nil or self.lastKey == key
     end
+
     function Map.prototype.set(self, key, value)
         local isNewValue = not self:has(key)
         if isNewValue then
@@ -1374,6 +1402,7 @@ do
         end
         return self
     end
+
     Map.prototype[Symbol.iterator] = function(self)
         return self:entries()
     end
@@ -1386,12 +1415,13 @@ do
                 return self
             end,
             next = function(self)
-                local result = {done = not key, value = {key, items[key]}}
+                local result = { done = not key, value = { key, items[key] } }
                 key = nextKey[key]
                 return result
             end
         }
     end
+
     function Map.prototype.keys(self)
         local nextKey = self.nextKey
         local key = self.firstKey
@@ -1400,12 +1430,13 @@ do
                 return self
             end,
             next = function(self)
-                local result = {done = not key, value = key}
+                local result = { done = not key, value = key }
                 key = nextKey[key]
                 return result
             end
         }
     end
+
     function Map.prototype.values(self)
         local items = self.items
         local nextKey = self.nextKey
@@ -1415,12 +1446,13 @@ do
                 return self
             end,
             next = function(self)
-                local result = {done = not key, value = items[key]}
+                local result = { done = not key, value = items[key] }
                 key = nextKey[key]
                 return result
             end
         }
     end
+
     Map[Symbol.species] = Map
 end
 
@@ -1433,7 +1465,7 @@ local function __TS__MapGroupBy(items, keySelector)
             local ____temp_0 = result:get(key)
             ____temp_0[#____temp_0 + 1] = item
         else
-            result:set(key, {item})
+            result:set(key, { item })
         end
         i = i + 1
     end
@@ -1529,13 +1561,15 @@ do
             local hexMatch = __TS__Match(numberString, "^%s*-?0[xX]")
             if hexMatch ~= nil then
                 base = 16
-                numberString = (__TS__Match(hexMatch, "-")) and "-" .. __TS__StringSubstring(numberString, #hexMatch) or __TS__StringSubstring(numberString, #hexMatch)
+                numberString = (__TS__Match(hexMatch, "-")) and "-" .. __TS__StringSubstring(numberString, #hexMatch) or
+                __TS__StringSubstring(numberString, #hexMatch)
             end
         end
         if base < 2 or base > 36 then
             return 0 / 0
         end
-        local allowedDigits = base <= 10 and __TS__StringSubstring(parseIntBasePattern, 0, base) or __TS__StringSubstring(parseIntBasePattern, 0, 10 + 2 * (base - 10))
+        local allowedDigits = base <= 10 and __TS__StringSubstring(parseIntBasePattern, 0, base) or
+        __TS__StringSubstring(parseIntBasePattern, 0, 10 + 2 * (base - 10))
         local pattern = ("^%s*(-?[" .. allowedDigits) .. "]*)"
         local number = tonumber((__TS__Match(numberString, pattern)), base)
         if number == nil then
@@ -1670,7 +1704,7 @@ local function __TS__ObjectEntries(obj)
     local len = 0
     for key in pairs(obj) do
         len = len + 1
-        result[len] = {key, obj[key]}
+        result[len] = { key, obj[key] }
     end
     return result
 end
@@ -1705,7 +1739,7 @@ local function __TS__ObjectGroupBy(items, keySelector)
             local ____result_key_0 = result[key]
             ____result_key_0[#____result_key_0 + 1] = item
         else
-            result[key] = {item}
+            result[key] = { item }
         end
         i = i + 1
     end
@@ -1795,15 +1829,15 @@ local function __TS__PromiseAllSettled(iterable)
     for ____, item in __TS__Iterator(iterable) do
         if __TS__InstanceOf(item, __TS__Promise) then
             if item.state == 1 then
-                results[i + 1] = {status = "fulfilled", value = item.value}
+                results[i + 1] = { status = "fulfilled", value = item.value }
             elseif item.state == 2 then
-                results[i + 1] = {status = "rejected", reason = item.rejectionReason}
+                results[i + 1] = { status = "rejected", reason = item.rejectionReason }
             else
                 numToResolve = numToResolve + 1
                 toResolve[i] = item
             end
         else
-            results[i + 1] = {status = "fulfilled", value = item}
+            results[i + 1] = { status = "fulfilled", value = item }
         end
         i = i + 1
     end
@@ -1817,14 +1851,14 @@ local function __TS__PromiseAllSettled(iterable)
                 promise["then"](
                     promise,
                     function(____, data)
-                        results[index + 1] = {status = "fulfilled", value = data}
+                        results[index + 1] = { status = "fulfilled", value = data }
                         numToResolve = numToResolve - 1
                         if numToResolve == 0 then
                             resolve(nil, results)
                         end
                     end,
                     function(____, reason)
-                        results[index + 1] = {status = "rejected", reason = reason}
+                        results[index + 1] = { status = "rejected", reason = reason }
                         numToResolve = numToResolve - 1
                         if numToResolve == 0 then
                             resolve(nil, results)
@@ -1869,7 +1903,7 @@ local function __TS__PromiseAny(iterable)
                         rejections[#rejections + 1] = reason
                         numResolved = numResolved + 1
                         if numResolved == #pending then
-                            reject(nil, {name = "AggregateError", message = "All Promises rejected", errors = rejections})
+                            reject(nil, { name = "AggregateError", message = "All Promises rejected", errors = rejections })
                         end
                     end
                 )
@@ -1936,6 +1970,7 @@ do
             end
         end
     end
+
     function Set.prototype.add(self, value)
         local isNewValue = not self:has(value)
         if isNewValue then
@@ -1951,6 +1986,7 @@ do
         end
         return self
     end
+
     function Set.prototype.clear(self)
         self.nextKey = {}
         self.previousKey = {}
@@ -1958,6 +1994,7 @@ do
         self.lastKey = nil
         self.size = 0
     end
+
     function Set.prototype.delete(self, value)
         local contains = self:has(value)
         if contains then
@@ -1982,14 +2019,17 @@ do
         end
         return contains
     end
+
     function Set.prototype.forEach(self, callback)
         for ____, key in __TS__Iterator(self:keys()) do
             callback(nil, key, key, self)
         end
     end
+
     function Set.prototype.has(self, value)
         return self.nextKey[value] ~= nil or self.lastKey == value
     end
+
     Set.prototype[Symbol.iterator] = function(self)
         return self:values()
     end
@@ -2001,12 +2041,13 @@ do
                 return self
             end,
             next = function(self)
-                local result = {done = not key, value = {key, key}}
+                local result = { done = not key, value = { key, key } }
                 key = nextKey[key]
                 return result
             end
         }
     end
+
     function Set.prototype.keys(self)
         local nextKey = self.nextKey
         local key = self.firstKey
@@ -2015,12 +2056,13 @@ do
                 return self
             end,
             next = function(self)
-                local result = {done = not key, value = key}
+                local result = { done = not key, value = key }
                 key = nextKey[key]
                 return result
             end
         }
     end
+
     function Set.prototype.values(self)
         local nextKey = self.nextKey
         local key = self.firstKey
@@ -2029,12 +2071,13 @@ do
                 return self
             end,
             next = function(self)
-                local result = {done = not key, value = key}
+                local result = { done = not key, value = key }
                 key = nextKey[key]
                 return result
             end
         }
     end
+
     function Set.prototype.union(self, other)
         local result = __TS__New(Set, self)
         for ____, item in __TS__Iterator(other) do
@@ -2042,6 +2085,7 @@ do
         end
         return result
     end
+
     function Set.prototype.intersection(self, other)
         local result = __TS__New(Set)
         for ____, item in __TS__Iterator(self) do
@@ -2051,6 +2095,7 @@ do
         end
         return result
     end
+
     function Set.prototype.difference(self, other)
         local result = __TS__New(Set, self)
         for ____, item in __TS__Iterator(other) do
@@ -2058,6 +2103,7 @@ do
         end
         return result
     end
+
     function Set.prototype.symmetricDifference(self, other)
         local result = __TS__New(Set, self)
         for ____, item in __TS__Iterator(other) do
@@ -2069,6 +2115,7 @@ do
         end
         return result
     end
+
     function Set.prototype.isSubsetOf(self, other)
         for ____, item in __TS__Iterator(self) do
             if not other:has(item) then
@@ -2077,6 +2124,7 @@ do
         end
         return true
     end
+
     function Set.prototype.isSupersetOf(self, other)
         for ____, item in __TS__Iterator(other) do
             if not self:has(item) then
@@ -2085,6 +2133,7 @@ do
         end
         return true
     end
+
     function Set.prototype.isDisjointFrom(self, other)
         for ____, item in __TS__Iterator(self) do
             if other:has(item) then
@@ -2093,17 +2142,18 @@ do
         end
         return true
     end
+
     Set[Symbol.species] = Set
 end
 
 local function __TS__SparseArrayNew(...)
-    local sparseArray = {...}
+    local sparseArray = { ... }
     sparseArray.sparseLength = __TS__CountVarargs(...)
     return sparseArray
 end
 
 local function __TS__SparseArrayPush(sparseArray, ...)
-    local args = {...}
+    local args = { ... }
     local argsLen = __TS__CountVarargs(...)
     local listLen = sparseArray.sparseLength
     for i = 1, argsLen do
@@ -2124,7 +2174,7 @@ do
     function WeakMap.prototype.____constructor(self, entries)
         self[Symbol.toStringTag] = "WeakMap"
         self.items = {}
-        setmetatable(self.items, {__mode = "k"})
+        setmetatable(self.items, { __mode = "k" })
         if entries == nil then
             return
         end
@@ -2145,21 +2195,26 @@ do
             end
         end
     end
+
     function WeakMap.prototype.delete(self, key)
         local contains = self:has(key)
         self.items[key] = nil
         return contains
     end
+
     function WeakMap.prototype.get(self, key)
         return self.items[key]
     end
+
     function WeakMap.prototype.has(self, key)
         return self.items[key] ~= nil
     end
+
     function WeakMap.prototype.set(self, key, value)
         self.items[key] = value
         return self
     end
+
     WeakMap[Symbol.species] = WeakMap
 end
 
@@ -2170,7 +2225,7 @@ do
     function WeakSet.prototype.____constructor(self, values)
         self[Symbol.toStringTag] = "WeakSet"
         self.items = {}
-        setmetatable(self.items, {__mode = "k"})
+        setmetatable(self.items, { __mode = "k" })
         if values == nil then
             return
         end
@@ -2190,25 +2245,29 @@ do
             end
         end
     end
+
     function WeakSet.prototype.add(self, value)
         self.items[value] = true
         return self
     end
+
     function WeakSet.prototype.delete(self, value)
         local contains = self:has(value)
         self.items[value] = nil
         return contains
     end
+
     function WeakSet.prototype.has(self, value)
         return self.items[value] == true
     end
+
     WeakSet[Symbol.species] = WeakSet
 end
 
 local function __TS__SourceMapTraceBack(fileName, sourceMap)
     _G.__TS__sourcemap = _G.__TS__sourcemap or ({})
     _G.__TS__sourcemap[fileName] = sourceMap
-    if _G.__TS__originalTraceback == nil then
+    if _G.__TS__originalTraceback == nil and debug ~= nil and debug.traceback ~= nil then
         local originalTraceback = debug.traceback
         _G.__TS__originalTraceback = originalTraceback
         debug.traceback = function(thread, message, level)
@@ -2368,7 +2427,8 @@ do
             return source
         end
         local before = sub(source, 1, startPos - 1)
-        local replacement = type(replaceValue) == "string" and replaceValue or replaceValue(nil, searchValue, startPos - 1, source)
+        local replacement = type(replaceValue) == "string" and replaceValue or
+        replaceValue(nil, searchValue, startPos - 1, source)
         local after = sub(source, endPos + 1)
         return (before .. replacement) .. after
     end
@@ -2517,6 +2577,7 @@ do
         end
         return symbolRegistry[key]
     end
+
     function __TS__SymbolRegistryKeyFor(sym)
         for key in pairs(symbolRegistry) do
             if symbolRegistry[key] == sym then
@@ -2539,7 +2600,7 @@ local function __TS__TypeOf(value)
 end
 
 local function __TS__Using(self, cb, ...)
-    local args = {...}
+    local args = { ... }
     local thrownError
     local ok, result = xpcall(
         function() return cb(__TS__Unpack(args)) end,
@@ -2548,7 +2609,7 @@ local function __TS__Using(self, cb, ...)
             return thrownError
         end
     )
-    local argArray = {__TS__Unpack(args)}
+    local argArray = { __TS__Unpack(args) }
     do
         local i = #argArray - 1
         while i >= 0 do
@@ -2564,20 +2625,22 @@ local function __TS__Using(self, cb, ...)
 end
 
 local function __TS__UsingAsync(self, cb, ...)
-    local args = {...}
+    local args = { ... }
     return __TS__AsyncAwaiter(function(____awaiter_resolve)
         local thrownError
         local ok, result = xpcall(
-            function() return cb(
-                nil,
-                __TS__Unpack(args)
-            ) end,
+            function()
+                return cb(
+                    nil,
+                    __TS__Unpack(args)
+                )
+            end,
             function(err)
                 thrownError = err
                 return thrownError
             end
         )
-        local argArray = {__TS__Unpack(args)}
+        local argArray = { __TS__Unpack(args) }
         do
             local i = #argArray - 1
             while i >= 0 do
@@ -2600,129 +2663,129 @@ local function __TS__UsingAsync(self, cb, ...)
 end
 
 return {
-  __TS__ArrayAt = __TS__ArrayAt,
-  __TS__ArrayConcat = __TS__ArrayConcat,
-  __TS__ArrayEntries = __TS__ArrayEntries,
-  __TS__ArrayEvery = __TS__ArrayEvery,
-  __TS__ArrayFill = __TS__ArrayFill,
-  __TS__ArrayFilter = __TS__ArrayFilter,
-  __TS__ArrayForEach = __TS__ArrayForEach,
-  __TS__ArrayFind = __TS__ArrayFind,
-  __TS__ArrayFindIndex = __TS__ArrayFindIndex,
-  __TS__ArrayFrom = __TS__ArrayFrom,
-  __TS__ArrayIncludes = __TS__ArrayIncludes,
-  __TS__ArrayIndexOf = __TS__ArrayIndexOf,
-  __TS__ArrayIsArray = __TS__ArrayIsArray,
-  __TS__ArrayJoin = __TS__ArrayJoin,
-  __TS__ArrayMap = __TS__ArrayMap,
-  __TS__ArrayPush = __TS__ArrayPush,
-  __TS__ArrayPushArray = __TS__ArrayPushArray,
-  __TS__ArrayReduce = __TS__ArrayReduce,
-  __TS__ArrayReduceRight = __TS__ArrayReduceRight,
-  __TS__ArrayReverse = __TS__ArrayReverse,
-  __TS__ArrayUnshift = __TS__ArrayUnshift,
-  __TS__ArraySort = __TS__ArraySort,
-  __TS__ArraySlice = __TS__ArraySlice,
-  __TS__ArraySome = __TS__ArraySome,
-  __TS__ArraySplice = __TS__ArraySplice,
-  __TS__ArrayToObject = __TS__ArrayToObject,
-  __TS__ArrayFlat = __TS__ArrayFlat,
-  __TS__ArrayFlatMap = __TS__ArrayFlatMap,
-  __TS__ArraySetLength = __TS__ArraySetLength,
-  __TS__ArrayToReversed = __TS__ArrayToReversed,
-  __TS__ArrayToSorted = __TS__ArrayToSorted,
-  __TS__ArrayToSpliced = __TS__ArrayToSpliced,
-  __TS__ArrayWith = __TS__ArrayWith,
-  __TS__AsyncAwaiter = __TS__AsyncAwaiter,
-  __TS__Await = __TS__Await,
-  __TS__Class = __TS__Class,
-  __TS__ClassExtends = __TS__ClassExtends,
-  __TS__CloneDescriptor = __TS__CloneDescriptor,
-  __TS__CountVarargs = __TS__CountVarargs,
-  __TS__Decorate = __TS__Decorate,
-  __TS__DecorateLegacy = __TS__DecorateLegacy,
-  __TS__DecorateParam = __TS__DecorateParam,
-  __TS__Delete = __TS__Delete,
-  __TS__DelegatedYield = __TS__DelegatedYield,
-  __TS__DescriptorGet = __TS__DescriptorGet,
-  __TS__DescriptorSet = __TS__DescriptorSet,
-  Error = Error,
-  RangeError = RangeError,
-  ReferenceError = ReferenceError,
-  SyntaxError = SyntaxError,
-  TypeError = TypeError,
-  URIError = URIError,
-  __TS__FunctionBind = __TS__FunctionBind,
-  __TS__Generator = __TS__Generator,
-  __TS__InstanceOf = __TS__InstanceOf,
-  __TS__InstanceOfObject = __TS__InstanceOfObject,
-  __TS__Iterator = __TS__Iterator,
-  __TS__LuaIteratorSpread = __TS__LuaIteratorSpread,
-  Map = Map,
-  __TS__MapGroupBy = __TS__MapGroupBy,
-  __TS__Match = __TS__Match,
-  __TS__MathAtan2 = __TS__MathAtan2,
-  __TS__MathModf = __TS__MathModf,
-  __TS__MathSign = __TS__MathSign,
-  __TS__MathTrunc = __TS__MathTrunc,
-  __TS__New = __TS__New,
-  __TS__Number = __TS__Number,
-  __TS__NumberIsFinite = __TS__NumberIsFinite,
-  __TS__NumberIsInteger = __TS__NumberIsInteger,
-  __TS__NumberIsNaN = __TS__NumberIsNaN,
-  __TS__ParseInt = __TS__ParseInt,
-  __TS__ParseFloat = __TS__ParseFloat,
-  __TS__NumberToString = __TS__NumberToString,
-  __TS__NumberToFixed = __TS__NumberToFixed,
-  __TS__ObjectAssign = __TS__ObjectAssign,
-  __TS__ObjectDefineProperty = __TS__ObjectDefineProperty,
-  __TS__ObjectEntries = __TS__ObjectEntries,
-  __TS__ObjectFromEntries = __TS__ObjectFromEntries,
-  __TS__ObjectGetOwnPropertyDescriptor = __TS__ObjectGetOwnPropertyDescriptor,
-  __TS__ObjectGetOwnPropertyDescriptors = __TS__ObjectGetOwnPropertyDescriptors,
-  __TS__ObjectGroupBy = __TS__ObjectGroupBy,
-  __TS__ObjectKeys = __TS__ObjectKeys,
-  __TS__ObjectRest = __TS__ObjectRest,
-  __TS__ObjectValues = __TS__ObjectValues,
-  __TS__ParseFloat = __TS__ParseFloat,
-  __TS__ParseInt = __TS__ParseInt,
-  __TS__Promise = __TS__Promise,
-  __TS__PromiseAll = __TS__PromiseAll,
-  __TS__PromiseAllSettled = __TS__PromiseAllSettled,
-  __TS__PromiseAny = __TS__PromiseAny,
-  __TS__PromiseRace = __TS__PromiseRace,
-  Set = Set,
-  __TS__SetDescriptor = __TS__SetDescriptor,
-  __TS__SparseArrayNew = __TS__SparseArrayNew,
-  __TS__SparseArrayPush = __TS__SparseArrayPush,
-  __TS__SparseArraySpread = __TS__SparseArraySpread,
-  WeakMap = WeakMap,
-  WeakSet = WeakSet,
-  __TS__SourceMapTraceBack = __TS__SourceMapTraceBack,
-  __TS__Spread = __TS__Spread,
-  __TS__StringAccess = __TS__StringAccess,
-  __TS__StringCharAt = __TS__StringCharAt,
-  __TS__StringCharCodeAt = __TS__StringCharCodeAt,
-  __TS__StringEndsWith = __TS__StringEndsWith,
-  __TS__StringIncludes = __TS__StringIncludes,
-  __TS__StringPadEnd = __TS__StringPadEnd,
-  __TS__StringPadStart = __TS__StringPadStart,
-  __TS__StringReplace = __TS__StringReplace,
-  __TS__StringReplaceAll = __TS__StringReplaceAll,
-  __TS__StringSlice = __TS__StringSlice,
-  __TS__StringSplit = __TS__StringSplit,
-  __TS__StringStartsWith = __TS__StringStartsWith,
-  __TS__StringSubstr = __TS__StringSubstr,
-  __TS__StringSubstring = __TS__StringSubstring,
-  __TS__StringTrim = __TS__StringTrim,
-  __TS__StringTrimEnd = __TS__StringTrimEnd,
-  __TS__StringTrimStart = __TS__StringTrimStart,
-  __TS__Symbol = __TS__Symbol,
-  Symbol = Symbol,
-  __TS__SymbolRegistryFor = __TS__SymbolRegistryFor,
-  __TS__SymbolRegistryKeyFor = __TS__SymbolRegistryKeyFor,
-  __TS__TypeOf = __TS__TypeOf,
-  __TS__Unpack = __TS__Unpack,
-  __TS__Using = __TS__Using,
-  __TS__UsingAsync = __TS__UsingAsync
+    __TS__ArrayAt = __TS__ArrayAt,
+    __TS__ArrayConcat = __TS__ArrayConcat,
+    __TS__ArrayEntries = __TS__ArrayEntries,
+    __TS__ArrayEvery = __TS__ArrayEvery,
+    __TS__ArrayFill = __TS__ArrayFill,
+    __TS__ArrayFilter = __TS__ArrayFilter,
+    __TS__ArrayForEach = __TS__ArrayForEach,
+    __TS__ArrayFind = __TS__ArrayFind,
+    __TS__ArrayFindIndex = __TS__ArrayFindIndex,
+    __TS__ArrayFrom = __TS__ArrayFrom,
+    __TS__ArrayIncludes = __TS__ArrayIncludes,
+    __TS__ArrayIndexOf = __TS__ArrayIndexOf,
+    __TS__ArrayIsArray = __TS__ArrayIsArray,
+    __TS__ArrayJoin = __TS__ArrayJoin,
+    __TS__ArrayMap = __TS__ArrayMap,
+    __TS__ArrayPush = __TS__ArrayPush,
+    __TS__ArrayPushArray = __TS__ArrayPushArray,
+    __TS__ArrayReduce = __TS__ArrayReduce,
+    __TS__ArrayReduceRight = __TS__ArrayReduceRight,
+    __TS__ArrayReverse = __TS__ArrayReverse,
+    __TS__ArrayUnshift = __TS__ArrayUnshift,
+    __TS__ArraySort = __TS__ArraySort,
+    __TS__ArraySlice = __TS__ArraySlice,
+    __TS__ArraySome = __TS__ArraySome,
+    __TS__ArraySplice = __TS__ArraySplice,
+    __TS__ArrayToObject = __TS__ArrayToObject,
+    __TS__ArrayFlat = __TS__ArrayFlat,
+    __TS__ArrayFlatMap = __TS__ArrayFlatMap,
+    __TS__ArraySetLength = __TS__ArraySetLength,
+    __TS__ArrayToReversed = __TS__ArrayToReversed,
+    __TS__ArrayToSorted = __TS__ArrayToSorted,
+    __TS__ArrayToSpliced = __TS__ArrayToSpliced,
+    __TS__ArrayWith = __TS__ArrayWith,
+    __TS__AsyncAwaiter = __TS__AsyncAwaiter,
+    __TS__Await = __TS__Await,
+    __TS__Class = __TS__Class,
+    __TS__ClassExtends = __TS__ClassExtends,
+    __TS__CloneDescriptor = __TS__CloneDescriptor,
+    __TS__CountVarargs = __TS__CountVarargs,
+    __TS__Decorate = __TS__Decorate,
+    __TS__DecorateLegacy = __TS__DecorateLegacy,
+    __TS__DecorateParam = __TS__DecorateParam,
+    __TS__Delete = __TS__Delete,
+    __TS__DelegatedYield = __TS__DelegatedYield,
+    __TS__DescriptorGet = __TS__DescriptorGet,
+    __TS__DescriptorSet = __TS__DescriptorSet,
+    Error = Error,
+    RangeError = RangeError,
+    ReferenceError = ReferenceError,
+    SyntaxError = SyntaxError,
+    TypeError = TypeError,
+    URIError = URIError,
+    __TS__FunctionBind = __TS__FunctionBind,
+    __TS__Generator = __TS__Generator,
+    __TS__InstanceOf = __TS__InstanceOf,
+    __TS__InstanceOfObject = __TS__InstanceOfObject,
+    __TS__Iterator = __TS__Iterator,
+    __TS__LuaIteratorSpread = __TS__LuaIteratorSpread,
+    Map = Map,
+    __TS__MapGroupBy = __TS__MapGroupBy,
+    __TS__Match = __TS__Match,
+    __TS__MathAtan2 = __TS__MathAtan2,
+    __TS__MathModf = __TS__MathModf,
+    __TS__MathSign = __TS__MathSign,
+    __TS__MathTrunc = __TS__MathTrunc,
+    __TS__New = __TS__New,
+    __TS__Number = __TS__Number,
+    __TS__NumberIsFinite = __TS__NumberIsFinite,
+    __TS__NumberIsInteger = __TS__NumberIsInteger,
+    __TS__NumberIsNaN = __TS__NumberIsNaN,
+    __TS__ParseInt = __TS__ParseInt,
+    __TS__ParseFloat = __TS__ParseFloat,
+    __TS__NumberToString = __TS__NumberToString,
+    __TS__NumberToFixed = __TS__NumberToFixed,
+    __TS__ObjectAssign = __TS__ObjectAssign,
+    __TS__ObjectDefineProperty = __TS__ObjectDefineProperty,
+    __TS__ObjectEntries = __TS__ObjectEntries,
+    __TS__ObjectFromEntries = __TS__ObjectFromEntries,
+    __TS__ObjectGetOwnPropertyDescriptor = __TS__ObjectGetOwnPropertyDescriptor,
+    __TS__ObjectGetOwnPropertyDescriptors = __TS__ObjectGetOwnPropertyDescriptors,
+    __TS__ObjectGroupBy = __TS__ObjectGroupBy,
+    __TS__ObjectKeys = __TS__ObjectKeys,
+    __TS__ObjectRest = __TS__ObjectRest,
+    __TS__ObjectValues = __TS__ObjectValues,
+    __TS__ParseFloat = __TS__ParseFloat,
+    __TS__ParseInt = __TS__ParseInt,
+    __TS__Promise = __TS__Promise,
+    __TS__PromiseAll = __TS__PromiseAll,
+    __TS__PromiseAllSettled = __TS__PromiseAllSettled,
+    __TS__PromiseAny = __TS__PromiseAny,
+    __TS__PromiseRace = __TS__PromiseRace,
+    Set = Set,
+    __TS__SetDescriptor = __TS__SetDescriptor,
+    __TS__SparseArrayNew = __TS__SparseArrayNew,
+    __TS__SparseArrayPush = __TS__SparseArrayPush,
+    __TS__SparseArraySpread = __TS__SparseArraySpread,
+    WeakMap = WeakMap,
+    WeakSet = WeakSet,
+    __TS__SourceMapTraceBack = __TS__SourceMapTraceBack,
+    __TS__Spread = __TS__Spread,
+    __TS__StringAccess = __TS__StringAccess,
+    __TS__StringCharAt = __TS__StringCharAt,
+    __TS__StringCharCodeAt = __TS__StringCharCodeAt,
+    __TS__StringEndsWith = __TS__StringEndsWith,
+    __TS__StringIncludes = __TS__StringIncludes,
+    __TS__StringPadEnd = __TS__StringPadEnd,
+    __TS__StringPadStart = __TS__StringPadStart,
+    __TS__StringReplace = __TS__StringReplace,
+    __TS__StringReplaceAll = __TS__StringReplaceAll,
+    __TS__StringSlice = __TS__StringSlice,
+    __TS__StringSplit = __TS__StringSplit,
+    __TS__StringStartsWith = __TS__StringStartsWith,
+    __TS__StringSubstr = __TS__StringSubstr,
+    __TS__StringSubstring = __TS__StringSubstring,
+    __TS__StringTrim = __TS__StringTrim,
+    __TS__StringTrimEnd = __TS__StringTrimEnd,
+    __TS__StringTrimStart = __TS__StringTrimStart,
+    __TS__Symbol = __TS__Symbol,
+    Symbol = Symbol,
+    __TS__SymbolRegistryFor = __TS__SymbolRegistryFor,
+    __TS__SymbolRegistryKeyFor = __TS__SymbolRegistryKeyFor,
+    __TS__TypeOf = __TS__TypeOf,
+    __TS__Unpack = __TS__Unpack,
+    __TS__Using = __TS__Using,
+    __TS__UsingAsync = __TS__UsingAsync
 }
diff --git a/node_modules/typescript-to-lua/dist/transpilation/bundle.js b/node_modules/typescript-to-lua/dist/transpilation/bundle.js
index f4e0cee..be1ad90 100644
--- a/node_modules/typescript-to-lua/dist/transpilation/bundle.js
+++ b/node_modules/typescript-to-lua/dist/transpilation/bundle.js
@@ -72,7 +72,7 @@ function printStackTraceBundleOverride(rootNode) {
     });
     const mapItems = Object.entries(map).map(([line, original]) => `["${line}"] = ${transformLineData(original)}`);
     const mapString = "{" + mapItems.join(",") + "}";
-    return `__TS__SourceMapTraceBack(debug.getinfo(1).short_src, ${mapString});`;
+    return `__TS__SourceMapTraceBack("?", ${mapString});`;
 }
 function getBundleResult(program, files) {
     var _a, _b, _c;
